# Konfiguracja bazy danych H2 (local development)
spring.datasource.url=jdbc:h2:file:./data/testdb;DB_CLOSE_ON_EXIT=FALSE;AUTO_RECONNECT=TRUE
spring.datasource.driverClassName=org.h2.Driver
spring.datasource.username=sa
spring.datasource.password=password
spring.jpa.database-platform=org.hibernate.dialect.H2Dialect
spring.h2.console.enabled=true
spring.h2.console.path=/h2-console

# Konfiguracja JPA (local development)
spring.jpa.hibernate.ddl-auto=create-drop
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.database=h2

# Konfiguracja Jackson
spring.jackson.time-zone=Europe/Warsaw

# Konfiguracja CORS (dla development)
cors.allowed-origins=http://localhost:3000,http://127.0.0.1:3000

# Konfiguracja JWT
jwt.secret-key=MzQ4MzA3ODU0NDYyMTMwMzAwMTMwMTUyMTQxMTMzNDMzMTIzMTMwMTYzMTUyMTMwMTM=

# Konfiguracja przesylania plikow
spring.servlet.multipart.max-file-size=10MB
spring.servlet.multipart.max-request-size=10MB

# Konfiguracja serwera
server.port=8080
server.host=localhost
login.url=http://localhost:3000/login

# Konfiguracja logowania
logging.level.com.example.infraboxapi.productionQueueItem=DEBUG
logging.level.org.hibernate.orm.connections.pooling=ERROR

# Konfiguracja Spring Boot Actuator (dla Docker healthcheck)
management.endpoints.web.exposure.include=health
management.endpoint.health.show-details=when-authorized
management.health.defaults.enabled=true

# ============================================
# PHASE 2 OPTIMIZATIONS - Connection Pooling
# ============================================
# HikariCP Connection Pool (zoptymalizowane dla Raspberry Pi + MariaDB)
spring.datasource.hikari.maximum-pool-size=50
spring.datasource.hikari.minimum-idle=10
spring.datasource.hikari.connection-timeout=20000
spring.datasource.hikari.idle-timeout=600000
spring.datasource.hikari.max-lifetime=1800000
spring.datasource.hikari.auto-commit=true
spring.datasource.hikari.connection-test-query=SELECT 1
spring.datasource.hikari.validation-timeout=5000
spring.datasource.hikari.leak-detection-threshold=60000

# Hibernate Batch Processing (reduces DB roundtrips)
spring.jpa.properties.hibernate.jdbc.batch_size=20
spring.jpa.properties.hibernate.order_inserts=true
spring.jpa.properties.hibernate.order_updates=true
spring.jpa.properties.hibernate.jdbc.batch_versioned_data=true

# ============================================
# PHASE 2 OPTIMIZATIONS - Redis Cache
# ============================================
# Redis Configuration (opcjonalne - włączane przez profile 'cache')
spring.cache.type=redis
spring.data.redis.host=redis
spring.data.redis.port=6379
spring.data.redis.timeout=2000ms
spring.data.redis.jedis.pool.max-active=20
spring.data.redis.jedis.pool.max-idle=10
spring.data.redis.jedis.pool.min-idle=5
spring.data.redis.jedis.pool.max-wait=2000ms

# Cache TTL (Time To Live) - customize per use case
spring.cache.redis.time-to-live=600000